# Тестовое задание для отбора на Летнюю ИТ-школу КРОК по разработке

## Условие задания
Будучи сотрудником департамента внутренней автоматизации одной IT компании, вы занимаетесь разработкой и интеграцией различных решений с целью автоматизации различных внутренних бизнес процессов компании. Так, например, в свое время в вашем департаменте была разработана система учета проектных трудозатрат.

Идеологически такая система содержит функциональность по вводу и работе со сведениями о проектах и, самое главное, управление фактическими трудозатратами – списаниями времени. Это значит, что при выполнении той или иной проектной задачи сотрудник фиксирует затраченное на решение задачи время в данной системе. В результате менеджмент проектов может оценивать потраченное время и, как следствие, деньги на реализацию проекта: по задачам, этапам и любому другому уровню детализации.

Что еще важно знать о списаниях времени. У каждого сотрудника компании есть норма списания - количество времени, которое необходимо списывать за рабочий день. В общем случае (и в рамках задачи делаем допущение, что во всех случаях) такая норма составляет 8 часов в день. Однако сотрудники по тем или иным причинам могут списывать как больше 8 часов, так и меньше, в результате чего образуется дизбаланс. 

В первом случае можно говорить о том, что сотрудник перегружен или тратит на задачи больше времени, чем планируется, но, желая успеть в срок, задерживается на работе. Во втором случае причиной может быть как простой (отсутствие задач), так и недоработки со стороны самого сотрудника. 

Дизбаланс списаний стал серьезно волновать руководителей производственных департаментов, поэтому было принято решение на регулярной основе мониторить дизбаланс и принимать соответствующие меры. Однако за неимением такого отчета в системе, руководство департамента обратилось к вам с просьбой реализовать MVP подобного отчета.

На текущий момент система управления содержит функцию выгрузки списаний “TSR-3” (присвоенный отчету код) за указанный период в следующем формате:

"_<id сотрудника в формате UUID> <Фамилия> <Имя> <Отчество> <Дата списания в формате dd.MM.YYYY> <количество часов>_"

При этом стоит учесть, что количество списаний сотрудником не ограничивается. Так, например, файл может выглядеть следующим образом:
```
a30b4d51-11b4-49b2-b356-466e92a66df7 Иванов Иван Иванович 16.05.2024 4
0f0ccd5e-cd46-462a-b92d-69a6ff147465 Петров Алексей Сергеевич 16.05.2024 6
a30b4d51-11b4-49b2-b356-466e92a66df7 Иванов Иван Иванович 16.05.2024 2.5
0f0ccd5e-cd46-462a-b92d-69a6ff147465 Петров Алексей Сергеевич 16.05.2024 2
a30b4d51-11b4-49b2-b356-466e92a66df7 Иванов Иван Иванович 16.05.2024 1.5
```

По данному примеру видно, что оба сотрудника (Петров А.С. и Иванов И.И.) списали за 16 мая каждый по 8 часов, но, скорее всего, в разные задачи.

Вам же необходимо разработать программу для анализа дизбаланса, технические требования к разработке которой содержат следующее:
1. На вход программа для анализа получает файл со списаниями report.txt за конкретную рабочую неделю. О формате файла известно следующее:
    - в первой строке файла указывается недельная норма списания на одного сотрудника (из расчета дневной нормы списания, равной 8 часам; например, 40 для пятидневной рабочей недели);
    - во всех последующих строках файла указывается перечень списаний сотрудников в формате отчета “TSR-3”. 
2. Программа определяет сотрудников, у которых дизбаланс списаний времени за неделю составляет более 10% в обе стороны;
3. Найденные сотрудники с дизбалансом по итогам работы программы записываются в текстовый файл result.txt в следующем виде:
  "_<Фамилия И.О.> <количество часов, составляющих дизбаланс, с указанием знака>_".
  Количество часов дизбаланса сопровождается знаками “+” и “–” в соответствии со следующими условиями:
    - для часов, которые идут сверх нормы, ставится знак “+”;
    - для часов, недостающих до нормы, ставится знак “–”.
4. В выходном файле сначала перечисляются сотрудники с отрицательным дизбалансом в алфавитном порядке, затем - сотрудники с положительным дизбалансом в алфавитном порядке.
5. Ручной ввод пути к файлу через интерактивный режим (посредством клавиатурного ввода) недопустим. Также эксплуатация программы не должна подразумевать какие-либо изменения программного кода с целью указания пути к файлам.

Примеры входного и выходного файлов приложены к настоящему техническому заданию.

## Автор решения
### Минин Никита Игоревич
## Описание реализации
Программа написана на java c использование JDK17.

### Состав программы
1. ### **Класс FileHandler**:
    - **Описание**: Класс FileHandler отвечает за чтение и запись строк из файлов.
    - **Методы**:
        - `readLines`: Читает строки из файла "report.txt" и возвращает их в виде списка строк.
        - `writeLines`: Записывает строки в файл "result.txt".
2. ### **Класс FileParser**:
    - **Описание**: Класс FileParser выполняет парсинг списка строк для извлечения недельной нормы и записей.
    - **Поля**:
        - `weeklyNorm`: Недельная норма, извлеченная из первой строки входных строк.
        - `entities`: Список записей типа `TSREntity`, полученных в результате парсинга входных строк.
    - **Методы**:
    - `FileParser`**: Конструктор объекта FileParser, выполняющий парсинг входных строк.
        - `parseWeeklyNorm`: Парсит недельную норму из первой строки входных данных.
        - `parseLinesToEntities`: Парсит записи типа `TSREntity` из входных строк.
        - `getEntities`: Возвращает список записей типа `TSREntity`.
        - `getWeeklyNorm`: Возвращает недельную норму.
3. ### **Класс TSREEntity**:
- **Описание**: Класс TSREntity представляет сущность отчёта о проделанной работе сотрудника, состоящую из количества отработанных часов и полного имени.
    - **Поля**:
        - `hours`: Количество отработанных часов сотрудника.
        - `fullName`: Полное имя сотрудника.
    - **Методы**:
        - `TSREntity`: Конструирует объект TSREntity с предоставленными данными.
        - `mapToInstance`: Парсит строку входных данных для создания экземпляра TSREntity.
        - `getFullName`: Геттер для полного имени сотрудника.
        - `getHours`: Геттер для количества отработанных часов.
4. ### **Класс ImbalanceInfo**:
- **Описание**: Класс, представляющий информацию о дисбалансе для сотрудника.
    - **Поля**:
        - `fullName`: Полное имя сотрудника.
        - `imbalance`: Дисбаланс для сотрудника.
    - **Методы**:
       - `ImbalanceInfo`: Конструктор класса ImbalanceInfo.
       - `getFullName`: Метод для получения полного имени сотрудника.
       - `getImbalance`: Метод для получения значения дисбаланса для сотрудника.
       - `toString`: Переопределение метода toString для форматированного вывода информации о дисбалансе.
5. ### **Класс ImbalanceCalculator**:
- **Описание**: Утилитный класс для вычисления дисбаланса и формирования списка информации о дисбалансе.
    - **Метод `calculateImbalances`**: Метод для вычисления дисбаланса и формирования списка информации о дисбалансе.
6. ### **Класс Main**:   
   **Описание**: Основной класс программы, содержащий метод `main` для запуска программы.
    - **Метод `main`**:
        - **Действия**:
            1. Создание объекта `FileHandler` для чтения и записи файлов.
            2. Создание объекта `FileParser` с передачей данных из файла в конструктор.
            3. Формирование списка `imbalanceInfos` с помощью метода `calculateImbalances` из `ImbalanceCalculator`, используя данные из `fileParser`.
            4. Запись результата в файл с помощью `FileHandler`.


## Инструкция по сборке и запуску решения

1. **Клонирование проекта с GitHub репозитория:**
    - Откройте терминал и выполните команду:
      ```
      git clone https://github.com/NikMe7/school2024-test-task6.git
      ```

2. **Сборка проекта с помощью Maven:**
    - Перейдите в корневую директорию проекта:
      ```
      cd ../school2024-test-task6
      ```
    - Выполните сборку проекта с помощью Maven:
      ```
      mvn clean install
      ```
    - Maven выполнит сборку проекта и создаст необходимые файлы.

3. **Запуск программы:**
    - После успешной сборки программы вы увидите сгенерированный JAR файл, просто дважды кликните на нем **или** выполните следующую команду в терминале:
     ```
     java -cp target/solution-1.0.jar solution.Main
     ```
    - Программа должна запуститься и начать выполнение.


### Примечание:
- Убедитесь, что у вас установлены [JDK17](https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html), [Git](https://git-scm.com/downloads), [Maven](https://maven.apache.org/) 
и исполняемый файл находится в оной директории с файлом `report.txt`.
- Перед сборкой убедитесь, что в вашем проекте присутствует файл `pom.xml`, который содержит информацию о зависимостях и сборке проекта.

## Инструкция по сборке и запуску решения (Второй способ)
1. **Скачивание готового JAR файла:**
    - Скачайте готовый JAR файл из репозитория проекта на GitHub.

2. **Запуск программы:**
    - Убедитесь, что на вашем компьютере установлен [JDK17](https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html).
    - После скачивания JAR файла, просто дважды кликните на нем **или** выполните следующую команду в терминале:
     ```
     java -cp target/solution-1.0.jar solution.Main
     ```
    
    - Программа должна запуститься и начать выполнение.

### Примечание:
- JAR файл должен находится в одной директории с файлом `report.txt`..